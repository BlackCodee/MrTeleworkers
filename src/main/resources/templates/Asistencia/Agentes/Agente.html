<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
     <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
  <link rel="stylesheet" href="/css/morris.css">
  <script src="/js/morris.min.js"></script>
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/estilosadminAsistenciaT.css">
    <title>Solicitudes Asignadas</title>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="calendario/jsCalendar.css">
  <link rel="stylesheet" type="text/css" href="calendario/jsCalendar.clean.css">
  <script type="text/javascript" src="calendario/jsCalendar.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <!-- CSS Files -->
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
  <!-- <!-- <link href="/assets/css/paper-dashboard.css?v=2.0.0" rel="stylesheet" /> -->
  <link rel="stylesheet" href="/css/estilosSlider.css">
  
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="/assets/demo/demo.css" rel="stylesheet" />
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
   <link rel="stylesheet" href="calendario/estilosCalendar.css">
   <link rel="stylesheet" href="/css/style_calendar_dash.css">
   <link rel="stylesheet" href="/css/estiloscartas.css">
    <!-- Required meta tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js"></script>

    <!-- Datatables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/v/bs4-4.1.1/dt-1.10.18/datatables.min.css">
    <script src="https://cdn.datatables.net/v/bs4-4.1.1/dt-1.10.18/datatables.min.js"></script>

    <!-- Buttons -->
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.2/css/buttons.dataTables.min.css">
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.53/build/pdfmake.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.53/build/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.flash.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.print.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <!-- ALERTS -->
    <link href="/assets/css/sweetalert.css" rel="stylesheet" type="text/css">
    <script src="/assets/js/sweetalert.min.js" type="text/javascript"></script>
    <style>
        #mydatatable tfoot input {
            width: 100% !important;
        }

        #mydatatable tfoot {
            display: table-header-group !important;
        }
    </style>
        <script>
        function eliminarSolicitud(idSolicitud){
        	swal({
          title: "Esta seguro de eliminar?",
          text: "Once deleted, you will not be able to recover this imaginary file!",
          icon: "warning",
          buttons: true,
          dangerMode: true,
        })
        .then((OK) => {
          if (OK) {
        	$.ajax({
        		url:"/eliminarSolicitudes/"+idSolicitud,
        		success: function(res){
        			console.log(res);
        		}
        		
        		});
            swal("Poof! Your imaginary file has been deleted!", {
              icon: "success",
              }).then((ok)=> {
        	if(ok){
        		location.href="/listarSolicitudedes";
        	}
            });
          } else {
            swal("Your imaginary file is safe!");
          }
        });
        	
        }
        </script>
</head>


<body >
        <!--inicio header-->
	<header class=" py-1 mb-0 bg-dark ">
		<div class="container d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
			<button type="button">
				<img src="assets/menu.png" alt="" width="30" height="30" class="menu-bar bi me-2 bg-light text-light">
			</button>

			<ul class="nav col-12 col-md-10 mb-2 justify-content-center mb-md-0">
				<li><a href="#" class="nav-link px-2 text-light">AGENTE TÈCNICO</a></li>
				
			</ul>

			<div class="col-md-1 text-center">
				<form class="d-flex" th:action="@{/logout}" method="post">
              		<input class="btn btn-outline-light me-2" type="submit" value="Salir" />
	           	</form>
			</div>
		</div>
	</header>
	<!--fin del header-->
		<!--inicio menu slider-->
		<div class="sidebar">
			<h2>MRTW</h2>
			<ul class="list">
				<li class="list__item">
                <div class="list__button">
                    <img src="/assets/dashboard.svg" class="list__img">
                    <a th:href="@{/dashboard-Agentes}" class="nav__link">Inicio</a>
                </div>
            </li>

            <li class="list__item list__item--click">
                <div class="list__button list__button--click">
                    <img src="/assets/docs.svg" class="list__img">
                    <a href="#" class="nav__link">SOLICITUDES</a>
                    <img src="/assets/arrow.svg" class="list__arrow">
                </div>

                <ul class="list__show">
                    <li class="list__inside">
                        <a class="nav__link nav__link--inside" th:href="@{/Agente}">Solicitudes Asignadas</a>
                    </li>

                    <li class="list__inside">
                        <a class="nav__link nav__link--inside" th:href="@{/Puntaje}">Consultar Puntaje</a>
                    </li>

                    
                </ul>

            </li>


				

			</ul>
		</div>
		<!--Fin menu slider-->
		<!--Comienzo contenido de la pagina-->
		<div class="contenido">
			
			
			
				
			<div>
				<h3>Solicitudes Asignadas <h3/> 
			</div>
			
			<div class="table-responsive  col-11 ml-5" id="mydatatable-container">
			   <table class="records_list table table-striped table-bordered table-hover" id="mydatatable">
					<thead>
					    <th>NO. SOLICITUD</th>
						<th>NOMBRE</th>
						<th>TIPO FALLA</th>
						<th>DESCRIPCION</th>
						<th>ESTADO</th>
						<th>CELULAR</th>
						<th>PRIORIDAD</th>
						<th>PUNTAJE</th>
					    <th>OPCIONES</th>
						
					</thead>
					<tbody>
						<tr th:each="agentesSoli:${agentesSoli}">
						    <td th:text="${agentesSoli.idSoli}"></td>
							<td th:text="${agentesSoli.Nombre}"></td>
							<td th:text="${agentesSoli.tipo_falla}"></td>
							<td th:text="${agentesSoli.Descripcion}"></td>
							<td th:text="${agentesSoli.Estado}"></td>
							<td th:text="${agentesSoli.celular}"></td>
							<td th:text="${agentesSoli.prioridad}"></td>
							<td th:text="${agentesSoli.puntaje}"></td>
						   
							
						   <td>
							
						  
						   <a th:href="@{/listarUsuarioInfo}" 
						   class="btn btn-info txt-light"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
</svg></a>
							
								
								
								<button type="button" class="btn btn-success" data-toggle="modal" data-target="#exampleModal" th:attr="data-target='#exampleModal'+${agentesSoli.idSoli}">
								  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2-square" viewBox="0 0 16 16">
  <path d="M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"/>
  <path d="m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"/>
</svg>
								</button>  
							</td>
							<div class="modal fade" th:attr="id='exampleModal'+${agentesSoli.idSoli}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
							  <div class="modal-dialog">
							    <div class="modal-content">
							      <div class="modal-header">
							        <h5 class="modal-title" id="exampleModalLabel">Has Solucionado la Solicitud?</h5>
							        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
							          <span aria-hidden="true">&times;</span>
							        </button>
							      </div>
							      <div class="modal-body">
							        Genial! Vas ganando puntos! <br> Solicitud ya solucionada <span th:text="${agentesSoli.Descripcion}"></span>?
							      </div>
							      <div class="modal-footer">
							        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
							        <span th:if="${agentesSoli.Estado == 'SOLUCIONADO'}"><a th:href="@{/puntajeAgente(idSoli=${agentesSoli.idSoli})}" type="button" class="btn btn-danger">PENDIENTE</a></span>
									<span th:if="${agentesSoli.Estado == 'PENDIENTE'}"><a th:href="@{/puntajeAgente(idSoli=${agentesSoli.idSoli})}" type="button" class="btn btn-success">SOLUCIONADO</a></span>
							      </div>
							    </div>
							  </div>
							</div>
							
						</tr>
					</tbody>
				</table>
			</div>
			<!--Comienzo contenido del footer-->
			<footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
				<div class="col-md-4 d-flex align-items-center">
					<ul>
						<li>
							<a href="#" target="_blank"
								class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1">MR TW</a>
						</li>
						<li>
							<a href="#" target="_blank"
								class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1">CONTACTO</a>
						</li>
					</ul>
				</div>
				<div
					class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
					<span class="copyright">
						©
						<script>
							document.write(new Date().getFullYear())
						</script>, GAES 4 (SENA) </i>
					</span>
				</div>
				<ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
					<li class="ms-3"><a class="text-muted" href="#"><i class="fab fa-facebook-square" width="24"
								height="24">&nbsp;&nbsp;</i></a></li>
					<li class="ms-3"><a class="text-muted" href="#"><i class="fab fa-twitter-square" width="24"
								height="24">&nbsp;&nbsp;</i></a></li>
					<li class="ms-3"><a class="text-muted" href="#"><i class="fab fa-google-plus" width="24"
								height="24">&nbsp;&nbsp;</i></a></li>
				</ul>
			</footer>
			<!--fin contenido del footer-->
		</div>
		
	<script src="/js/sliderjs.js"></script>
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#mydatatable tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Filtrar.." />');
            });

            var table = $('#mydatatable').DataTable({
                "dom": 'B<"float-left"i><"float-right"f>t<"float-left"l><"float-right"p><"clearfix">',
                "responsive": false,
                "language": {
                    "url": "https://cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"
                },
                "order": [
                    [0, "desc"]
                ],
                "initComplete": function () {
                    this.api().columns().every(function () {
                        var that = this;

                        $('input', this.footer()).on('keyup change', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    })
                },
                
                "buttons": ['csv', 'excel', 'pdf', 'print']
            });
        });
    </script>
</body>

</html>
